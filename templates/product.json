/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "main": {
      "type": "main-product",
      "blocks": {
        "title": {
          "type": "title",
          "settings": {}
        },
        "custom_liquid_qpmfVF": {
          "type": "custom_liquid",
          "settings": {
            "custom_liquid": "{% comment %}\n  Renders Google star rating for a place\n\n  Accepts:\n  - product: {Object} Product Liquid object with place_id metafield (optional)\n  - place_id: {String} Google Place ID (optional, overrides product metafield)\n  - title: {String} Title to display above rating (optional)\n  - show_details: {Boolean} Show rating number and review count (optional, default: true)\n  - alignment: {String} Text alignment: left, center, right (optional, default: left)\n  - star_size: {Number} Size of stars in pixels (optional, default: 20)\n  - star_color: {String} Color of filled stars (optional, default: #ffd700)\n  - title_color: {String} Color of title text (optional, default: #333)\n  - details_color: {String} Color of details text (optional, default: #666)\n  - class: {String} Additional CSS classes (optional)\n\n  Usage:\n  {% render 'google-star-rating', product: product %}\n  {% render 'google-star-rating', place_id: 'ChIJ...', title: 'Customer Rating', alignment: 'center' %}\n{% endcomment %}\n\n{%- liquid\n  if place_id\n    assign rating_place_id = place_id\n  elsif product.metafields.custom.place_id\n    assign rating_place_id = product.metafields.custom.place_id\n  else\n    assign rating_place_id = null\n  endif\n\n  assign rating_title = title | default: ''\n  assign rating_show_details = show_details | default: true\n  assign rating_alignment = alignment | default: 'left'\n  assign rating_star_size = star_size | default: 20\n  assign rating_star_color = star_color | default: '#ffd700'\n  assign rating_title_color = title_color | default: '#333333'\n  assign rating_details_color = details_color | default: '#666666'\n  assign rating_class = class | default: ''\n\n  assign unique_id = 'google-rating-' | append: rating_place_id | replace: ' ', '-' | replace: '/', '-'\n-%}\n\n{%- if rating_place_id != blank -%}\n<div class=\"google-star-rating {{ rating_class }}\"\n     id=\"{{ unique_id }}\"\n     data-place-id=\"{{ rating_place_id }}\"\n     style=\"text-align: {{ rating_alignment }};\">\n\n  {%- if rating_title != blank -%}\n    <div class=\"google-star-rating__title\" style=\"color: {{ rating_title_color }};\">\n      {{ rating_title }}\n    </div>\n  {%- endif -%}\n\n  <div class=\"google-star-rating__container\">\n    <div class=\"google-star-rating__content\" style=\"display: none;\">\n      <div class=\"google-star-rating__stars\"\n           data-star-size=\"{{ rating_star_size }}\"\n           data-star-color=\"{{ rating_star_color }}\">\n      </div>\n\n      {%- if rating_show_details -%}\n        <div class=\"google-star-rating__details\" style=\"color: {{ rating_details_color }};\">\n          <span class=\"rating-value\" style=\"color: {{ rating_title_color }};\"></span>\n          <span class=\"rating-text\">out of 5 stars</span>\n          <span class=\"rating-count\"></span>\n        </div>\n      {%- endif -%}\n\n      <div class=\"google-star-rating__logo\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" fill=\"#4285F4\"/>\n          <path d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" fill=\"#34A853\"/>\n          <path d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" fill=\"#FBBC05\"/>\n          <path d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" fill=\"#EA4335\"/>\n        </svg>\n      </div>\n    </div>\n  </div>\n</div>\n\n<style>\n  .google-star-rating {\n    display: inline-block;\n    margin: 8px 0;\n  }\n\n  .google-star-rating__title {\n    font-size: 16px;\n    font-weight: 600;\n    margin-bottom: 8px;\n    margin-top: 0;\n  }\n\n  .google-star-rating__container {\n    display: inline-block;\n  }\n\n  .google-star-rating__content {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    flex-wrap: wrap;\n  }\n\n  .google-star-rating__stars {\n    line-height: 1;\n    display: flex;\n    align-items: center;\n    margin: 0;\n  }\n\n  .google-star-rating__stars .star {\n    margin-right: 1px;\n    line-height: 1;\n    display: inline-block;\n  }\n\n  .google-star-rating__details {\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    margin: 0;\n    line-height: 1.2;\n  }\n\n  .google-star-rating__details .rating-value {\n    font-weight: 600;\n  }\n\n  .google-star-rating__details .rating-count {\n    font-style: italic;\n  }\n\n  .google-star-rating__logo {\n    opacity: 0.7;\n    flex-shrink: 0;\n    display: flex;\n    align-items: center;\n    margin-top: -1px; /* Fine-tune vertical alignment */\n  }\n\n  .google-star-rating__logo svg {\n    width: 16px;\n    height: 16px;\n    display: block;\n  }\n</style>\n\n<script>\n  (function() {\n    // Avoid multiple script executions\n    if (window.GoogleStarRatingSnippet) return;\n    window.GoogleStarRatingSnippet = true;\n\n    class GoogleStarRatingManager {\n      constructor() {\n        this.processedRatings = new Set();\n        this.apiReady = false;\n        this.apiPromise = null;\n        this.init();\n      }\n\n      async init() {\n        // Wait for DOM and then process all ratings\n        if (document.readyState === 'loading') {\n          document.addEventListener('DOMContentLoaded', () => this.processAllRatings());\n        } else {\n          this.processAllRatings();\n        }\n      }\n\n      async processAllRatings() {\n        const ratingElements = document.querySelectorAll('.google-star-rating[data-place-id]');\n\n        for (const element of ratingElements) {\n          const elementId = element.id;\n          if (!this.processedRatings.has(elementId)) {\n            this.processedRatings.add(elementId);\n            await this.loadRating(element);\n          }\n        }\n      }\n\n      async ensureGoogleMapsAPI() {\n        if (this.apiReady) return;\n\n        if (this.apiPromise) {\n          await this.apiPromise;\n          return;\n        }\n\n        this.apiPromise = this.waitForGoogleMaps();\n        await this.apiPromise;\n        this.apiReady = true;\n      }\n\n      async waitForGoogleMaps() {\n        let attempts = 0;\n        const maxRetries = 15;\n\n        while (attempts < maxRetries) {\n          if (typeof google !== 'undefined' && google.maps) {\n            try {\n              await google.maps.importLibrary(\"places\");\n              console.log('âœ… Google Maps API found for star rating snippet');\n              return;\n            } catch (placesError) {\n              console.log(`âš ï¸ Places library not ready for rating: ${placesError.message}`);\n            }\n          }\n\n          await new Promise(resolve => setTimeout(resolve, 300));\n          attempts++;\n        }\n\n        // Fallback: load our own API\n        console.log('ðŸ”„ Loading Google Maps API for star rating...');\n        await this.loadGoogleMapsAPI();\n      }\n\n      async loadGoogleMapsAPI() {\n        return new Promise((resolve, reject) => {\n          if (document.querySelector('script[src*=\"googleapis.com/maps\"]')) {\n            const checkGoogle = () => {\n              if (typeof google !== 'undefined' && google.maps) {\n                resolve();\n              } else {\n                setTimeout(checkGoogle, 100);\n              }\n            };\n            checkGoogle();\n            return;\n          }\n\n          const script = document.createElement('script');\n          script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyCQ3bPzVGn7UbU6BBDYHX6mB4xjb6tAR5o&libraries=places';\n          script.async = true;\n          script.defer = true;\n          script.onload = resolve;\n          script.onerror = () => reject(new Error('Failed to load Google Maps API'));\n          document.head.appendChild(script);\n        });\n      }\n\n      async loadRating(element) {\n        const placeId = element.dataset.placeId;\n        const contentContainer = element.querySelector('.google-star-rating__content');\n\n        try {\n          await this.ensureGoogleMapsAPI();\n\n          if (!placeId || placeId.trim() === '') {\n            throw new Error('Invalid Place ID');\n          }\n\n          const { Place } = await google.maps.importLibrary(\"places\");\n          const place = new Place({ id: placeId.trim() });\n\n          await place.fetchFields({\n            fields: ['rating', 'userRatingCount']\n          });\n\n          if (place.rating !== null && place.rating !== undefined) {\n            this.displayRating(element, place.rating, place.userRatingCount || 0);\n          } else {\n            // Don't display anything if no rating available\n            this.hideElement(element);\n          }\n\n        } catch (error) {\n          console.error('Google star rating error:', error);\n          // Don't display anything if there's an error\n          this.hideElement(element);\n        }\n      }\n\n      displayRating(element, rating, reviewsCount) {\n        const starsContainer = element.querySelector('.google-star-rating__stars');\n        const detailsContainer = element.querySelector('.google-star-rating__details');\n        const contentContainer = element.querySelector('.google-star-rating__content');\n\n        if (!starsContainer) return;\n\n        const starSize = starsContainer.dataset.starSize || '20';\n        const starColor = starsContainer.dataset.starColor || '#ffd700';\n\n        // Generate stars\n        const fullStars = Math.floor(rating);\n        const hasHalfStar = rating % 1 >= 0.5;\n        const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n        let starsHTML = '';\n\n        for (let i = 0; i < fullStars; i++) {\n          starsHTML += `<span class=\"star filled\" style=\"font-size: ${starSize}px; color: ${starColor};\">â˜…</span>`;\n        }\n\n        if (hasHalfStar) {\n          starsHTML += `<span class=\"star half\" style=\"font-size: ${starSize}px; color: ${starColor};\">â˜†</span>`;\n        }\n\n        for (let i = 0; i < emptyStars; i++) {\n          starsHTML += `<span class=\"star empty\" style=\"font-size: ${starSize}px; color: #ddd;\">â˜†</span>`;\n        }\n\n        starsContainer.innerHTML = starsHTML;\n\n        // Update details\n        if (detailsContainer) {\n          const ratingValue = detailsContainer.querySelector('.rating-value');\n          const ratingCount = detailsContainer.querySelector('.rating-count');\n\n          if (ratingValue) ratingValue.textContent = rating.toFixed(1);\n          if (ratingCount) {\n            ratingCount.textContent = `(${reviewsCount} review${reviewsCount !== 1 ? 's' : ''})`;\n          }\n        }\n\n        // Show the content now that it's ready\n        if (contentContainer) {\n          contentContainer.style.display = 'flex';\n        }\n      }\n\n      hideElement(element) {\n        // Hide the entire rating element if there's an error or no rating\n        element.style.display = 'none';\n      }\n    }\n\n    // Initialize the manager\n    new GoogleStarRatingManager();\n  })();\n</script>\n{%- endif -%}"
          }
        },
        "price": {
          "type": "price",
          "settings": {}
        },
        "variant_picker": {
          "type": "variant_picker",
          "settings": {
            "picker_type": "button",
            "swatch_shape": "circle"
          }
        },
        "custom_liquid_KfdPe3": {
          "type": "custom_liquid",
          "disabled": true,
          "settings": {
            "custom_liquid": "{% if product.metafields.custom.offer %}\n  <a \n    href=\"/pages/bundles\" \n    style=\"\n      display: inline-block;\n      padding: 8px 14px;\n      background-color: #ff4d4d;\n      color: #ffffff;\n      font-weight: bold;\n      border-radius: 6px;\n      text-decoration: none;\n      transition: background-color 0.2s ease;\n    \"\n    onmouseover=\"this.style.backgroundColor='#e63e3e'\"\n    onmouseout=\"this.style.backgroundColor='#ff4d4d'\"\n  >\n    {{ product.metafields.custom.offer }}\n  </a>\n{% endif %}"
          }
        },
        "quantity_selector": {
          "type": "quantity_selector",
          "settings": {}
        },
        "buy_buttons": {
          "type": "buy_buttons",
          "settings": {
            "show_dynamic_checkout": false,
            "show_gift_card_recipient": true
          }
        },
        "description": {
          "type": "description",
          "settings": {}
        },
        "share": {
          "type": "share",
          "settings": {
            "share_label": "Share"
          }
        }
      },
      "block_order": [
        "title",
        "custom_liquid_qpmfVF",
        "price",
        "variant_picker",
        "custom_liquid_KfdPe3",
        "quantity_selector",
        "buy_buttons",
        "description",
        "share"
      ],
      "custom_css": [],
      "settings": {
        "enable_sticky_info": true,
        "color_scheme": "scheme-1",
        "media_size": "medium",
        "constrain_to_viewport": true,
        "media_fit": "contain",
        "gallery_layout": "thumbnail_slider",
        "mobile_thumbnails": "hide",
        "media_position": "left",
        "image_zoom": "lightbox",
        "hide_variants": true,
        "enable_video_looping": false,
        "padding_top": 36,
        "padding_bottom": 12
      }
    },
    "product_location_map_F8UbMq": {
      "type": "product-location-map",
      "settings": {}
    },
    "related-products": {
      "type": "related-products",
      "settings": {
        "heading": "You might also like",
        "heading_size": "h2",
        "products_to_show": 4,
        "columns_desktop": 4,
        "columns_mobile": "2",
        "color_scheme": "scheme-1",
        "image_ratio": "square",
        "image_shape": "default",
        "show_secondary_image": true,
        "show_vendor": false,
        "show_rating": false,
        "padding_top": 36,
        "padding_bottom": 28
      }
    },
    "google_reviews_jymm3d": {
      "type": "google-reviews",
      "name": "Google Reviews",
      "settings": {
        "background_color": "#f8f9fa",
        "heading_color": "#333333"
      }
    }
  },
  "order": [
    "main",
    "product_location_map_F8UbMq",
    "related-products",
    "google_reviews_jymm3d"
  ]
}
