{{ 'scrolling-logos.css' | asset_url | stylesheet_tag }}

{% assign logos = 'casawi.webp,coverflex.webp,estRadio.webp,radioBocconi.webp,conoscoUnPosto.webp,doubleyou.webp,laStampa.webp'
  | split: ','
%}

<div class="page-width">
    {% if section.settings.section_title != blank %}
      <h2>
        {% liquid
          case request.locale.iso_code
          when 'it'
            echo section.settings.section_title_it | default: section.settings.section_title | default: 'Parlano di noi'
          else
            echo section.settings.section_title | default: 'They talk about us'
          endcase
        %}
      </h2>
    {% endif %}
</div>

<div class="page-width">
  <div class="logo-scroller-wrapper">
    <div class="logo-scroller js-logo-scroller">
      <div class="logo-list-wrapper js-logo-list-wrapper">
        <div class="logo-list js-logo-list">
          {% for logo in logos %}
            <img
              loading="lazy"
              src="{{ logo | asset_url }}"
              alt="{{ logo | split: '.' | first | replace: '-', ' ' | capitalize }}"
            >
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const wrapper = document.querySelector(".js-logo-list-wrapper");
  const list = document.querySelector(".js-logo-list");

  if (!wrapper || !list) return;

  const fullWidth = list.offsetWidth;

  const clone1 = list.cloneNode(true);
  const clone2 = list.cloneNode(true);
  wrapper.appendChild(clone1);
  wrapper.appendChild(clone2);

  wrapper.style.setProperty('--scroll-distance', `-${fullWidth}px`);
});
</script>

{% schema %}
{
  "name": "Scrolling Logos",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Title (English)",
      "default": "They talk about us"
    },
    {
      "type": "text",
      "id": "section_title_it",
      "label": "Title (Italian)",
      "default": "Parlano di noi"
    }
  ],
  "presets": [
    {
      "name": "Scrolling Logos"
    }
  ]
}
{% endschema %}
