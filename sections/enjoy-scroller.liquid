{{ 'enjoy-scroller.css' | asset_url | stylesheet_tag }}

<style>
             .enjoy-scroller-wrapper {
               position: relative;
               overflow: hidden;
               background-size: contain;
               background-position: 400px;
               background-repeat: no-repeat;
               background-attachment: fixed;
             }

             /* Animated background container */
             .macaron-background {
               position: absolute;

               width: 100%;
               height: 100%;
               pointer-events: none;
               z-index: 0;
             }

             .macaron-left {
               left: -150px;
             }

             .macaron-right {
               right: -150px;

             }

     .macaron-slider-image {
      position: absolute;
      opacity: 0;
      animation: fadeInOut 16s infinite;
      animation-fill-mode: both;
      height:350px;

                     object-fit: cover;
                width:auto;

    }

           #macaron-1 { animation-delay: 0s; }
           #macaron-3 { animation-delay: 4s; }
           #macaron-2 { animation-delay: 8s; }
           #macaron-4 { animation-delay: 12s; }

           @keyframes fadeInOut {
             0%, 100%   { opacity: 0; }
             12.5%, 25% { opacity: 1; }
             30%, 100%  { opacity: 0; }
           }

  .enjoy-button {
               margin-button: 100px;
  }
             .enjoy-line,
             .enjoy-button {

               position: relative;
               z-index: 1;
             }


        @media (max-width: 768px) {

          .macaron-background {
        opacity: 0.3; /* or any value you prefer */
      }

          .macaron-slider-image {
            left: 50% !important;
            top: 50% !important;
            transform: translate(-50%, -50%) !important;
            right: auto !important;
            bottom: auto !important;
                object-fit: contain;
                width:100%;
            padding: 1px;
      height: 100%;
          }

          .macaron-left,
          .macaron-right {
            top: 50%
          }
        }
             }
</style>

<div class="page-width">
  <div class="enjoy-scroller-wrapper">
    <!-- Animated Background Images -->
    <div class="macaron-background">
      <img
        id="macaron-1"
        src="{{ 'es1.webp' | asset_url }}"
        alt="Macaron Left 1"
        class="macaron-slider-image macaron-left"
      >
      <img
        id="macaron-2"
        src="{{ 'es3.webp' | asset_url }}"
        alt="Macaron Left 2"
        class="macaron-slider-image macaron-left"
      >
      <img
        id="macaron-3"
        src="{{ 'es2.webp' | asset_url }}"
        alt="Macaron Right 1"
        class="macaron-slider-image macaron-right"
      >
      <img
        id="macaron-4"
        src="{{ 'es5.webp' | asset_url }}"
        alt="Macaron Right 2"
        class="macaron-slider-image macaron-right"
      >
    </div>

    <!-- Main Content -->
    <div class="enjoy-line">
      <div class="enjoy-logo">
        <img src="{{ 'enjoy.webp' | asset_url }}" alt="Enjoy Logo" style="height: 3rem;">
      </div>

      <div class="word-scroller">
        <div class="highlight-zone"></div>
        <div class="word-list">
          {% assign word_keys = 'sections.enjoy.joy.word_1,sections.enjoy.joy.word_2,sections.enjoy.joy.word_3,sections.enjoy.joy.word_4,sections.enjoy.joy.word_5'
            | split: ','
          %}
          {% for key in word_keys %}
            <div class="word">{{ key | t }}</div>
          {% endfor %}
          {% for key in word_keys %}
            <div class="word">{{ key | t }}</div>
          {% endfor %}
          {% for key in word_keys %}
            <div class="word">{{ key | t }}</div>
          {% endfor %}
        </div>
      </div>
    </div>

    <div class="enjoy-buttons-container">
      <a
        class="enjoy-button enjoy-button-primary"
        href="{{ routes.all_products_collection_url }}"
        onclick="
          event.preventDefault();
          const url='{{ routes.all_products_collection_url }}';
          if (typeof gtag==='function') {
            gtag('event', 'click_explore_page', {
              button_name: 'Enjoy Explore',
              destination_url: url,
              debug_mode: true,
              transport_type: 'beacon',
              event_callback: function(){ window.location.href = url; }
            });
            setTimeout(function(){ window.location.href = url; }, 500);
          } else {
            window.location.href = url;
          }
        "
      >
        {{ 'sections.enjoy.explore' | t }}
      </a>

      <a
        class="enjoy-button enjoy-button-primary"
        href="{{ section.settings.gift_url | default: 'pages/gift-cards' }}"
        onclick="
          event.preventDefault();
          const url='{{ section.settings.gift_url | default: 'pages/gift-cards' }}';
          if (typeof gtag==='function') {
            gtag('event', 'click_gift_page', {
              button_name: 'Enjoy Gift',
              destination_url: url,
              debug_mode: true,
              transport_type: 'beacon',
              event_callback: function(){ window.location.href = url; }
            });
            setTimeout(function(){ window.location.href = url; }, 500);
          } else {
            window.location.href = url;
          }
        "
      >
        {{ 'sections.enjoy.gift' | t }}
      </a>
    </div>
  </div>
</div>

<style>
  /* CSS-based bold effect synchronized with scroll animation */
  /* Slower, more gradual transitions between bold states */
  @keyframes boldCycle {
    0%, 15% {
      --word-1-bold: 0.1;
      --word-2-bold: 0.1;
      --word-3-bold: 0.1;
      --word-4-bold: 0.1;
      --word-5-bold: 1;
    }
    15%, 35% {
      --word-1-bold: 1;
      --word-2-bold: 0.1;
      --word-3-bold: 0.1;
      --word-4-bold: 0.1;
      --word-5-bold: 0.1;
    }
    35%, 55% {
      --word-1-bold: 0.1;
      --word-2-bold: 1;
      --word-3-bold: 0.1;
      --word-4-bold: 0.1;
      --word-5-bold: 0.1;
    }
    55%, 75% {
      --word-1-bold: 0.1;
      --word-2-bold: 0.1;
      --word-3-bold: 1;
      --word-4-bold: 0.1;
      --word-5-bold: 0.1;
    }
    75%, 95% {
      --word-1-bold: 0.1;
      --word-2-bold: 0.1;
      --word-3-bold: 0.1;
      --word-4-bold: 1;
      --word-5-bold: 0.1;
    }
    95%, 100% {
      --word-1-bold: 0.1;
      --word-2-bold: 0.1;
      --word-3-bold: 0.1;
      --word-4-bold: 0.1;
      --word-5-bold: 1;
    }
  }

  .word-list {
    animation: scroll-loop 10s linear infinite, boldCycle 10s linear infinite;
    animation-delay: 0s, -5s; /* Offset bold animation by 5 seconds */
  }

  .word:nth-child(1), .word:nth-child(6), .word:nth-child(11) {
    opacity: var(--word-1-bold, 0.1);
    transform: scale(calc(0.95 + 0.1 * var(--word-1-bold, 0)));
  }
  .word:nth-child(2), .word:nth-child(7), .word:nth-child(12) {
    opacity: var(--word-2-bold, 0.1);
    transform: scale(calc(0.95 + 0.1 * var(--word-2-bold, 0)));
  }
  .word:nth-child(3), .word:nth-child(8), .word:nth-child(13) {
    opacity: var(--word-3-bold, 0.1);
    transform: scale(calc(0.95 + 0.1 * var(--word-3-bold, 0)));
  }
  .word:nth-child(4), .word:nth-child(9), .word:nth-child(14) {
    opacity: var(--word-4-bold, 0.1);
    transform: scale(calc(0.95 + 0.1 * var(--word-4-bold, 0)));
  }
  .word:nth-child(5), .word:nth-child(10), .word:nth-child(15) {
    opacity: var(--word-5-bold, 0.1);
    transform: scale(calc(0.95 + 0.1 * var(--word-5-bold, 0)));
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Simple script to ensure CSS animations are running
    const wordList = document.querySelector('.word-list');
    if (wordList) {
      // Force animation restart if needed
      wordList.style.animationName = 'none';
      wordList.offsetHeight; // Trigger reflow
      wordList.style.animationName = '';
    }
  });
</script>

{% schema %}
{
  "name": "Enjoy Scroller",
  "settings": [],
  "presets": [
    {
      "name": "Enjoy Scroller"
    }
  ]
}
{% endschema %}
